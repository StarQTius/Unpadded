


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xml:lang="" lang="" version="-//W3C//DTD XHTML 1.1//EN" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

  
  <title>Implementing caller side &mdash; Unpadded  documentation</title>
  

  

  

    <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'/>
    <link rel="stylesheet" href="_static/css/pdj.css" type="text/css" />

  
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  
    <link rel="stylesheet" href="_static/css/pdj.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Unpadded  documentation" href="index.html"/>
        <link rel="next" title="Implementing callee side" href="callee.html"/>
        <link rel="prev" title="Sharing RPC convention" href="shared.html"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="cache-control" content="public" />
    <meta name="robots" content="follow, all" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Add jQuery library -->
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

  </head>

  <body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> Unpadded </a>
        <div role="search">
	  <form id ="rtd-search-form" class="wy-form"
		action="search.html" method="get">
	    <input type="text" name="q" placeholder="Search docs" />
	    <input type="hidden" name="check_keywords" value="yes" />
	    <input type="hidden" name="area" value="default" />
	  </form>
	</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="shared.html">Sharing RPC convention</a><ul>
<li class="toctree-l2"><a class="reference internal" href="shared.html#basics-defining-a-keyring">Basics : defining a keyring</a></li>
<li class="toctree-l2"><a class="reference internal" href="shared.html#binding-lambda-expressions-and-invocable-objects-to-a-keyring">Binding lambda expressions and invocable objects to a keyring</a></li>
<li class="toctree-l2"><a class="reference internal" href="shared.html#pre-c-17-support">Pre C++17 support</a></li>
<li class="toctree-l2"><a class="reference internal" href="shared.html#api-references">API References</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Implementing caller side</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#basics-sending-request-with-keys">Basics : sending request with keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="#handling-the-callee-response">Handling the callee response</a></li>
<li class="toctree-l2"><a class="reference internal" href="#api-references">API References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="callee.html">Implementing callee side</a><ul>
<li class="toctree-l2"><a class="reference internal" href="callee.html#basics-fulfiling-incoming-request-with-dispatchers">Basics : fulfiling incoming request with dispatchers</a></li>
<li class="toctree-l2"><a class="reference internal" href="callee.html#hot-swapping-callbacks">Hot swapping callbacks</a></li>
<li class="toctree-l2"><a class="reference internal" href="callee.html#storage-policy">Storage policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="callee.html#api-references">API References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="serialization.html">Serialization tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="serialization.html#api-references">API References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="python.html">Extending Unpadded to Python</a><ul>
<li class="toctree-l2"><a class="reference internal" href="python.html#api-references">API References</a></li>
</ul>
</li>
</ul>

          
        

      </div>
      &nbsp;
    </nav>
    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      <nav class="wy-nav-top" id="barra-mobile" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="#">Porão do Juca</a>
      </nav>

      <div class="wy-nav-content">
	<div class="fundo-claro">
	</div>
	<div class="fundo-escuro">
	</div>

        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
	    
	    <!-- <ul class="wy-breadcrumbs"> -->
	    <!--   <li><a href="#">Docs</a> &raquo;</li> -->

	    <!--   <li>Features</li> -->
	    <!--   <li class="wy-breadcrumbs-aside"> -->

	    <!-- 	<a href="_sources/index.txt" rel="nofollow"> View page source</a> -->

	    <!--   </li> -->
	    <!-- </ul> -->
	    <!-- <hr/> -->
	  </div>

          <div role="main" class="">

	    <div id="content" class="hfeed entry-container hentry">
  <section id="implementing-caller-side">
<h1>Implementing caller side<a class="headerlink" href="#implementing-caller-side" title="Permalink to this heading">¶</a></h1>
<p>On the caller side, requesting a remote device to invoke a function is pretty much like a regular function invocation. The types of the arguments are checked at compile-time. The type of the return value is also available at compile-time.</p>
<p>What Unpadded does for you is generating the packet and sending them byte by byte with a user-provided callback. What remains to be handled is the implementation of the aforesaid callback and the packets encapsulation, if you need one.</p>
<p>The following sections will assume these functions to be defined by the master device:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">write_byte_to_slave</span><span class="p">(</span><span class="n">upd</span><span class="o">::</span><span class="n">byte_t</span><span class="p">);</span><span class="w"></span>
<span class="n">upd</span><span class="o">::</span><span class="n">byte_t</span><span class="w"> </span><span class="nf">read_byte_from_slave</span><span class="p">();</span><span class="w"></span>
</pre></div>
</div>
<section id="basics-sending-request-with-keys">
<h2>Basics : sending request with keys<a class="headerlink" href="#basics-sending-request-with-keys" title="Permalink to this heading">¶</a></h2>
<p>Preparing a packet for a request is done by using keys from the corresponding keyring. Let say we defined a <code class="docutils literal notranslate"><span class="pre">keyring</span></code> object holding the function <code class="docutils literal notranslate"><span class="pre">f</span></code> of signature <code class="docutils literal notranslate"><span class="pre">void(std::uint8_t,</span> <span class="pre">std::uint16_t)</span></code>.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// We create a key to `f`.</span>
<span class="k">auto</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">keyring</span><span class="p">.</span><span class="n">get</span><span class="o">&lt;</span><span class="n">f</span><span class="o">&gt;</span><span class="p">();</span><span class="w"></span>

<span class="c1">// Then we generate the packet and write every byte of it to the slave device.</span>
<span class="c1">// On the remote device, ``f`` will be invoked on the arguments ``16`` and ``64``.</span>
<span class="n">key</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="w"> </span><span class="mi">64</span><span class="p">).</span><span class="n">write_to</span><span class="p">(</span><span class="n">write_byte_to_slave</span><span class="p">);</span><span class="w"></span>

<span class="c1">// This line does the same thing, but with another syntax.</span>
<span class="n">key</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="w"> </span><span class="mi">64</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">write_byte_to_slave</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>If argument types does not match, the compiler will tell you.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">array</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mh">0x00</span><span class="p">,</span><span class="w"> </span><span class="mh">0x11</span><span class="p">,</span><span class="w"> </span><span class="mh">0x22</span><span class="p">};</span><span class="w"></span>
<span class="k">auto</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">keyring</span><span class="p">.</span><span class="n">get</span><span class="o">&lt;</span><span class="n">f</span><span class="o">&gt;</span><span class="p">();</span><span class="w"></span>

<span class="c1">// What are you doing ?</span>
<span class="c1">//      vvvvv</span>
<span class="n">key</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="w"> </span><span class="n">array</span><span class="p">).</span><span class="n">write_all</span><span class="p">(</span><span class="n">write_byte_to_master</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Once sent, the packet must be received by a dispatcher.</p>
<section id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this heading">¶</a></h3>
<p>In the follwing example, we are requesting the slave device to spiral faster and faster.</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">motion_keyring.hpp</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#pragma once</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;cstdint&gt;</span><span class="cp"></span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;upd/format.hpp&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;upd/keyring.hpp&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;upd/typelist.hpp&gt;</span><span class="cp"></span>

<span class="kt">void</span><span class="w"> </span><span class="nf">set_forward_speed</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="kt">uint32_t</span><span class="p">);</span><span class="w"></span>
<span class="kt">void</span><span class="w"> </span><span class="nf">set_left_steering_speed</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="kt">uint32_t</span><span class="p">);</span><span class="w"></span>
<span class="kt">void</span><span class="w"> </span><span class="nf">set_right_steering_speed</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="kt">uint32_t</span><span class="p">);</span><span class="w"></span>

<span class="k">constexpr</span><span class="w"> </span><span class="n">upd</span><span class="o">::</span><span class="n">keyring</span><span class="w"> </span><span class="n">motion_keyring</span><span class="p">{</span><span class="n">upd</span><span class="o">::</span><span class="n">flist</span><span class="o">&lt;</span><span class="n">set_forward_speed</span><span class="p">,</span><span class="w"> </span><span class="n">set_left_steering_speed</span><span class="p">,</span><span class="w"> </span><span class="n">set_right_steering_speed</span><span class="o">&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                      </span><span class="n">upd</span><span class="o">::</span><span class="n">little_endian</span><span class="p">,</span><span class="w"></span>
<span class="w">                                      </span><span class="n">upd</span><span class="o">::</span><span class="n">two_complement</span><span class="p">};</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">master.cpp</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#pragma once</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;cstdint&gt;</span><span class="cp"></span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;upd/format.hpp&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;upd/keyring.hpp&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;upd/typelist.hpp&gt;</span><span class="cp"></span>

<span class="kt">void</span><span class="w"> </span><span class="nf">set_forward_speed</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="kt">uint32_t</span><span class="p">);</span><span class="w"></span>
<span class="kt">void</span><span class="w"> </span><span class="nf">set_left_steering_speed</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="kt">uint32_t</span><span class="p">);</span><span class="w"></span>
<span class="kt">void</span><span class="w"> </span><span class="nf">set_right_steering_speed</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="kt">uint32_t</span><span class="p">);</span><span class="w"></span>

<span class="k">constexpr</span><span class="w"> </span><span class="n">upd</span><span class="o">::</span><span class="n">keyring</span><span class="w"> </span><span class="n">motion_keyring</span><span class="p">{</span><span class="n">upd</span><span class="o">::</span><span class="n">flist</span><span class="o">&lt;</span><span class="n">set_forward_speed</span><span class="p">,</span><span class="w"> </span><span class="n">set_left_steering_speed</span><span class="p">,</span><span class="w"> </span><span class="n">set_right_steering_speed</span><span class="o">&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">                                      </span><span class="n">upd</span><span class="o">::</span><span class="n">little_endian</span><span class="p">,</span><span class="w"></span>
<span class="w">                                      </span><span class="n">upd</span><span class="o">::</span><span class="n">two_complement</span><span class="p">};</span><span class="w"></span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="handling-the-callee-response">
<h2>Handling the callee response<a class="headerlink" href="#handling-the-callee-response" title="Permalink to this heading">¶</a></h2>
<p>You are free to ignore the result of an invocation request if you don’t need it. Unpadded won’t handle the response from the callee automatically. If you need to, there is two different way to proceed. Either you send a request then wait until the slave device is done (blocking mode) or you hook a callback to be invoked when receiving a response from the slave device (non-blocking mode).</p>
<section id="blocking-mode">
<h3>Blocking mode<a class="headerlink" href="#blocking-mode" title="Permalink to this heading">¶</a></h3>
<p>In blocking mode, keys must be used to extract the invocaiton request result out of the packet sent back to the master device.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// We assume that a `keyring` object has been defined and holds a function `f` of signature `std::uint8_t(std::uint16_t)`</span>

<span class="k">auto</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">keyring</span><span class="p">.</span><span class="n">get</span><span class="o">&lt;</span><span class="n">f</span><span class="o">&gt;</span><span class="p">();</span><span class="w"></span>

<span class="c1">// First we send a request to the slave device</span>
<span class="n">key</span><span class="p">(</span><span class="mi">64</span><span class="p">).</span><span class="n">write_to</span><span class="p">(</span><span class="n">write_byte_to_slave</span><span class="p">);</span><span class="w"></span>

<span class="c1">// Let&#39;s wait a little for the slave device to completely fulfill the request</span>

<span class="c1">// Then we receive its response</span>
<span class="c1">// `x` type is `std::uint8_t`</span>
<span class="k">auto</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">key</span><span class="p">.</span><span class="n">read_from</span><span class="p">(</span><span class="n">read_byte_from_slave</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="non-blocking-mode">
<h3>Non-blocking mode<a class="headerlink" href="#non-blocking-mode" title="Permalink to this heading">¶</a></h3>
<p>In non-blocking mode, the <code class="docutils literal notranslate"><span class="pre">action</span></code> class must be used to store a callback for later.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// We assume that a `keyring` object has been defined and holds a function `f` of signature `std::uint8_t(std::uint16_t)`</span>

<span class="k">static</span><span class="w"> </span><span class="n">upd</span><span class="o">::</span><span class="n">action</span><span class="w"> </span><span class="n">action</span><span class="p">;</span><span class="w"></span>

<span class="kt">void</span><span class="w"> </span><span class="nf">send_request</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">keyring</span><span class="p">.</span><span class="n">get</span><span class="o">&lt;</span><span class="n">f</span><span class="o">&gt;</span><span class="p">();</span><span class="w"></span>

<span class="w">  </span><span class="c1">// We send the request...</span>
<span class="w">  </span><span class="n">key</span><span class="p">(</span><span class="mi">64</span><span class="p">).</span><span class="n">write_to</span><span class="p">(</span><span class="n">write_byte_to_slave</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="c1">// ...and then, we save our callback for later</span>
<span class="w">  </span><span class="n">action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">key</span><span class="p">.</span><span class="n">with_hook</span><span class="p">(</span><span class="n">my_callback</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kt">void</span><span class="w"> </span><span class="nf">process_response</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// Our callback is called !</span>
<span class="w">  </span><span class="n">action</span><span class="p">(</span><span class="n">read_byte_from_slave</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">send_request</span><span class="p">();</span><span class="w"></span>

<span class="w">  </span><span class="c1">// Meanwhile, we do other stuff...</span>

<span class="w">  </span><span class="n">process_response</span><span class="p">();</span><span class="w"></span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">action</span></code> is non-templated, so it is suitable for storage.</p>
</section>
</section>
<section id="api-references">
<h2>API References<a class="headerlink" href="#api-references" title="Permalink to this heading">¶</a></h2>
<section id="key">
<h3><code class="docutils literal notranslate"><span class="pre">key</span></code><a class="headerlink" href="#key" title="Permalink to this heading">¶</a></h3>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4I0_7Index_T0_9endianess_11signed_modeEN3upd3keyE">
<span id="_CPPv3I0_7Index_T0_9endianess_11signed_modeEN3upd3keyE"></span><span id="_CPPv2I0_7Index_T0_9endianess_11signed_modeEN3upd3keyE"></span><span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><span class="k"><span class="pre">typename</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Index_T</span></span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4I0_7Index_T0_9endianess_11signed_modeEN3upd3keyE" title="upd::key::Index_T"><span class="n"><span class="pre">Index_T</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Index</span></span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">typename</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">F</span></span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N3upd3key9endianessE" title="upd::key::endianess"><span class="n"><span class="pre">endianess</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Endianess</span></span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N3upd3key11signed_modeE" title="upd::key::signed_mode"><span class="n"><span class="pre">signed_mode</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Signed_Mode</span></span></span><span class="p"><span class="pre">&gt;</span></span><br /><span class="target" id="structupd_1_1key"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">key</span></span></span><a class="headerlink" href="#_CPPv4I0_7Index_T0_9endianess_11signed_modeEN3upd3keyE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Packet generator for invoking an action on a callee device. </p>
<p>Keys will generate packets whose structure is the following:<ul class="simple">
<li><p>index of the action (value: <code class="docutils literal notranslate"><span class="pre">Index</span></code>; size: <code class="docutils literal notranslate"><span class="pre">sizeof</span> <span class="pre">Index</span></code>);</p></li>
<li><p>payload (size: <code class="docutils literal notranslate"><span class="pre">sizeof(Args)</span> <span class="pre">+</span> <span class="pre">...</span></code>);</p></li>
</ul>
</p>
<p>The index is used by the callee to determine which action is addressed. The content of the payload is choosen by the user. In the following example :</p>
<p><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">int</span> <span class="n">function1</span><span class="p">(</span><span class="n">uint8_t</span><span class="p">,</span> <span class="n">uint16_t</span><span class="p">);</span>
<span class="nb">int</span> <span class="n">function2</span><span class="p">(</span><span class="n">uint16_t</span><span class="p">,</span> <span class="n">uint32_t</span><span class="p">);</span>
<span class="nb">int</span> <span class="n">function3</span><span class="p">(</span><span class="n">uint32_t</span><span class="p">,</span> <span class="n">uint64_t</span><span class="p">);</span>

<span class="n">constexpr</span> <span class="n">keyring</span> <span class="n">keyring</span><span class="p">{</span><span class="n">flist</span><span class="o">&lt;</span><span class="n">function1</span><span class="p">,</span> <span class="n">function2</span><span class="p">,</span> <span class="n">function3</span><span class="o">&gt;</span><span class="p">};</span>

<span class="nb">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">auto</span> <span class="n">key</span> <span class="o">=</span> <span class="n">keyring</span><span class="o">.</span><span class="n">get</span><span class="o">&lt;</span><span class="n">function2</span><span class="o">&gt;</span><span class="p">();</span>
  <span class="n">key</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">21</span><span class="p">)</span><span class="o">.</span><span class="n">write_to</span><span class="p">(</span><span class="o">/*</span><span class="n">an</span> <span class="n">output</span> <span class="n">invocable</span><span class="o">*/</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</p>
<p>The packet sent will have the following content:<ul class="simple">
<li><p>1 byte of index (value: 1)</p></li>
<li><p>2 bytes for the first argument of <code class="docutils literal notranslate"><span class="pre">function2</span></code> (type: <code class="docutils literal notranslate"><span class="pre">uint16_t</span></code>; value: 7)</p></li>
<li><p>4 bytes for the second argument of <code class="docutils literal notranslate"><span class="pre">function2</span></code> (type: <code class="docutils literal notranslate"><span class="pre">uint32_t</span></code>; value: 21)</p></li>
</ul>
</p>
<p>When the packet has been processed by the callee device and the resulting value is sent back to the caller device, keys can be used to extract this value from the callee response. The syntax to achieve that is <code class="docutils literal notranslate"><span class="pre">auto</span> <span class="pre">x</span> <span class="pre">=</span> <a class="reference internal" href="#structupd_1_1key_1af085280515ea28041935f8068885cde0"><span class="std std-ref"><span class="pre">key.read_from</span></span></a><span class="pre">(/*an</span> <span class="pre">input</span> <span class="pre">invocable*</span><span class="pre">/)</span></code>. However,  key instances being templated, it is hard to store them for later. If blocking the program until the callee device response is not a viable option, it is possible to save a callback to be executed once the callee device has finished using the  action or  <a class="reference internal" href="#classupd_1_1no__storage__action"><span class="std std-ref">no_storage_action</span></a> classes.</p>
<dl class="field-list simple">
<dt class="field-odd">Template Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Index</strong> – Index of the action in the keyring </p></li>
<li><p><strong>F</strong> – Signature of the callback associated with the key </p></li>
<li><p><strong>Endianess, Signed_Mode</strong> – Serialization parameters </p></li>
</ul>
</dd>
</dl>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-types">Public Types</p>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N3upd3key7index_tE">
<span id="_CPPv3N3upd3key7index_tE"></span><span id="_CPPv2N3upd3key7index_tE"></span><span class="target" id="structupd_1_1key_1adb1898a7dbf6f029b42cd5fba5f14943"></span><span class="k"><span class="pre">using</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">index_t</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4I0_7Index_T0_9endianess_11signed_modeEN3upd3keyE" title="upd::key::Index_T"><span class="n"><span class="pre">Index_T</span></span></a><a class="headerlink" href="#_CPPv4N3upd3key7index_tE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Type of the index as found in the packets generated by this key. </p>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N3upd3key11signature_tE">
<span id="_CPPv3N3upd3key11signature_tE"></span><span id="_CPPv2N3upd3key11signature_tE"></span><span class="target" id="structupd_1_1key_1aea5dce6ef5fcceccd86586c28adb07bc"></span><span class="k"><span class="pre">using</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">signature_t</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="n"><span class="pre">R</span></span><span class="p"><span class="pre">(</span></span><span class="n"><span class="pre">Args</span></span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#_CPPv4N3upd3key11signature_tE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Signature of the invocable associated with this key. </p>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N3upd3key8return_tE">
<span id="_CPPv3N3upd3key8return_tE"></span><span id="_CPPv2N3upd3key8return_tE"></span><span class="target" id="structupd_1_1key_1a8056b67f363fa00a670050ee5756eabb"></span><span class="k"><span class="pre">using</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">return_t</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="n"><span class="pre">detail</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">remove_cv_ref_t</span></span><span class="p"><span class="pre">&lt;</span></span><span class="n"><span class="pre">R</span></span><span class="p"><span class="pre">&gt;</span></span><a class="headerlink" href="#_CPPv4N3upd3key8return_tE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Return type of <a class="reference internal" href="#structupd_1_1key_1af085280515ea28041935f8068885cde0"><span class="std std-ref">read_from()</span></a> (i.e. the return type of the callback without its reference and cv-qualifier) </p>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N3upd3key7tuple_tE">
<span id="_CPPv3N3upd3key7tuple_tE"></span><span id="_CPPv2N3upd3key7tuple_tE"></span><span class="target" id="structupd_1_1key_1a7db2ac63296932c80f4823fbc49c8ed1"></span><span class="k"><span class="pre">using</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">tuple_t</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><a class="reference internal" href="serialization.html#_CPPv4I_9endianess_11signed_modeDpEN3upd5tupleE" title="upd::tuple"><span class="n"><span class="pre">tuple</span></span></a><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4I0_7Index_T0_9endianess_11signed_modeEN3upd3keyE" title="upd::key::Endianess"><span class="n"><span class="pre">Endianess</span></span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4I0_7Index_T0_9endianess_11signed_modeEN3upd3keyE" title="upd::key::Signed_Mode"><span class="n"><span class="pre">Signed_Mode</span></span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">detail</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">remove_cv_ref_t</span></span><span class="p"><span class="pre">&lt;</span></span><span class="n"><span class="pre">Args</span></span><span class="p"><span class="pre">&gt;</span></span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">&gt;</span></span><a class="headerlink" href="#_CPPv4N3upd3key7tuple_tE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Type of the tuple which can be invoked on this key (e.g. <code class="docutils literal notranslate"><span class="pre">t.invoke(key)</span></code>) </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK3upd3keyclEDpRK4Args">
<span id="_CPPv3NK3upd3keyclEDpRK4Args"></span><span id="_CPPv2NK3upd3keyclEDpRK4Args"></span><span id="upd::key::call-operator__ArgsCRDpC"></span><span class="target" id="structupd_1_1key_1a6e4af8d6b51d226ef44c9305b92fa26a"></span><span class="kt"><span class="pre">auto</span></span><span class="w"> </span><span class="sig-name descname"><span class="k"><span class="pre">operator</span></span><span class="o"><span class="pre">()</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">Args</span></span><span class="p"><span class="pre">&amp;</span></span><span class="p"><span class="pre">...</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">args</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK3upd3keyclEDpRK4Args" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Generate a packet ready to be sent. </p>
<p>This allows the following syntax : <code class="docutils literal notranslate"><span class="pre">key(x1,</span> <span class="pre">x2,</span> <span class="pre">x3,</span> <span class="pre">...).write_to(dest)</span></code> (with <code class="docutils literal notranslate"><span class="pre">dest</span></code> being an output sequence as a callback). <code class="docutils literal notranslate"><span class="pre">dest</span></code> is invoked on every byte representing the data passed as parameter, in the action they appear in the packet.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>args...</strong> – Values to insert in the payload </p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a temporary object allowing the syntax mentioned above </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4I0ENK3upd3key9read_fromE8return_tRR3Src">
<span id="_CPPv3I0ENK3upd3key9read_fromERR3Src"></span><span id="_CPPv2I0ENK3upd3key9read_fromERR3Src"></span><span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><span class="k"><span class="pre">typename</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Src</span></span></span><span class="p"><span class="pre">&gt;</span></span><br /><span class="target" id="structupd_1_1key_1af085280515ea28041935f8068885cde0"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N3upd3key8return_tE" title="upd::key::return_t"><span class="n"><span class="pre">return_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">read_from</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4I0ENK3upd3key9read_fromE8return_tRR3Src" title="upd::key::read_from::Src"><span class="n"><span class="pre">Src</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">src</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4I0ENK3upd3key9read_fromE8return_tRR3Src" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Unserialize a value from a packet sent by a callee device in response to a packet generated by this key. </p>
<p>The following member functions are also defined through CRTP. <div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">R</span> <span class="n">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">Src</span> <span class="o">&amp;&amp;</span><span class="p">);</span>
<span class="n">R</span> <span class="n">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">Src</span> <span class="o">&amp;&amp;</span><span class="p">)</span> <span class="n">const</span><span class="p">;</span>
<span class="n">R</span> <span class="n">read_from</span><span class="p">(</span><span class="n">It</span><span class="p">);</span>
<span class="n">R</span> <span class="n">read_from</span><span class="p">(</span><span class="n">It</span><span class="p">)</span> <span class="n">const</span><span class="p">;</span>
<span class="n">R</span> <span class="n">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">It</span><span class="p">);</span>
<span class="n">R</span> <span class="n">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">It</span><span class="p">)</span> <span class="n">const</span><span class="p">;</span>
</pre></div>
</div>
 All these functions work the same way as <code class="docutils literal notranslate"><span class="pre">read_from(Src</span> <span class="pre">&amp;&amp;)</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Template Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Src</strong> – Input functor type </p></li>
<li><p><strong>It</strong> – Input iterator type</p></li>
</ul>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>src</strong> – Input invocable to the packet </p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the unserialized value </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4I0ENK3upd3key9with_hookE6actionRR1F">
<span id="_CPPv3I0ENK3upd3key9with_hookERR1F"></span><span id="_CPPv2I0ENK3upd3key9with_hookERR1F"></span><span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><span class="k"><span class="pre">typename</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">F</span></span></span><span class="p"><span class="pre">&gt;</span></span><br /><span class="target" id="structupd_1_1key_1aafc5ea5310ff845c185d8380c44539fb"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N3upd6actionE" title="upd::action"><span class="n"><span class="pre">action</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">with_hook</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4I0ENK3upd3key9with_hookE6actionRR1F" title="upd::key::with_hook::F"><span class="n"><span class="pre">F</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">ftor</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4I0ENK3upd3key9with_hookE6actionRR1F" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Plan an action to perform when a packet resulting from the execution of the action is received. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ftor</strong> – Callback which will carry out the action </p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>an action holding the provided hook </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4I0_1FENK3upd3key9with_hookE17no_storage_action11unevaluatedI1F4FtorE">
<span id="_CPPv3I0_1FENK3upd3key9with_hookE11unevaluatedI1F4FtorE"></span><span id="_CPPv2I0_1FENK3upd3key9with_hookE11unevaluatedI1F4FtorE"></span><span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><span class="k"><span class="pre">typename</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">F</span></span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4I0_1FENK3upd3key9with_hookE17no_storage_action11unevaluatedI1F4FtorE" title="upd::key::with_hook::F"><span class="n"><span class="pre">F</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Ftor</span></span></span><span class="p"><span class="pre">&gt;</span></span><br /><span class="target" id="structupd_1_1key_1a579d236cdaed8f404e231f3748dbc348"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N3upd17no_storage_actionE" title="upd::no_storage_action"><span class="n"><span class="pre">no_storage_action</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">with_hook</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="shared.html#_CPPv4I0_1TEN3upd11unevaluatedE" title="upd::unevaluated"><span class="n"><span class="pre">unevaluated</span></span></a><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4I0_1FENK3upd3key9with_hookE17no_storage_action11unevaluatedI1F4FtorE" title="upd::key::with_hook::F"><span class="n"><span class="pre">F</span></span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4I0_1FENK3upd3key9with_hookE17no_storage_action11unevaluatedI1F4FtorE" title="upd::key::with_hook::Ftor"><span class="n"><span class="pre">Ftor</span></span></a><span class="p"><span class="pre">&gt;</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4I0_1FENK3upd3key9with_hookE17no_storage_action11unevaluatedI1F4FtorE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Plan an action to perform when a packet resulting from the execution of the action is received. </p>
<dl class="field-list simple">
<dt class="field-odd">Template Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>Ftor</strong> – Callback which will carry out the action </p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>an action holding the provided hook </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4I_RDaENK3upd3key9with_hookEDav">
<span id="_CPPv3I_RDaENK3upd3key9with_hookEv"></span><span id="_CPPv2I_RDaENK3upd3key9with_hookEv"></span><span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">auto</span></span><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="sig-name descname"><span class="n"><span class="pre">Ftor</span></span></span><span class="p"><span class="pre">&gt;</span></span><br /><span class="target" id="structupd_1_1key_1ad706f865226109a5a081dc2a89937efa"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">auto</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">with_hook</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4I_RDaENK3upd3key9with_hookEDav" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Plan an action to perform when a packet resulting from the execution of the action is received. </p>
<dl class="field-list simple">
<dt class="field-odd">Template Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>Ftor</strong> – Callback which will carry out the action </p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>an action holding the provided hook </p>
</dd>
</dl>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-attributes">Public Static Attributes</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N3upd3key5indexE">
<span id="_CPPv3N3upd3key5indexE"></span><span id="_CPPv2N3upd3key5indexE"></span><span id="upd::key::index__auto"></span><span class="target" id="structupd_1_1key_1a7882915aa78d5472ca4ce3866733e047"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="k"><span class="pre">constexpr</span></span><span class="w"> </span><span class="kt"><span class="pre">auto</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">index</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4I0_7Index_T0_9endianess_11signed_modeEN3upd3keyE" title="upd::key::Index"><span class="n"><span class="pre">Index</span></span></a><a class="headerlink" href="#_CPPv4N3upd3key5indexE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Equals the <code class="docutils literal notranslate"><span class="pre">Index</span></code> template parameter. </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N3upd3key9endianessE">
<span id="_CPPv3N3upd3key9endianessE"></span><span id="_CPPv2N3upd3key9endianessE"></span><span id="upd::key::endianess__auto"></span><span class="target" id="structupd_1_1key_1a824760f518b3d8df95a31af83b340d97"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="k"><span class="pre">constexpr</span></span><span class="w"> </span><span class="kt"><span class="pre">auto</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">endianess</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4I0_7Index_T0_9endianess_11signed_modeEN3upd3keyE" title="upd::key::Endianess"><span class="n"><span class="pre">Endianess</span></span></a><a class="headerlink" href="#_CPPv4N3upd3key9endianessE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Equals the <code class="docutils literal notranslate"><span class="pre">Endianess</span></code> template parameter. </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N3upd3key11signed_modeE">
<span id="_CPPv3N3upd3key11signed_modeE"></span><span id="_CPPv2N3upd3key11signed_modeE"></span><span id="upd::key::signed_mode__auto"></span><span class="target" id="structupd_1_1key_1aa7efb1bb064f1ad5a76b8860bf1d79a7"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="k"><span class="pre">constexpr</span></span><span class="w"> </span><span class="kt"><span class="pre">auto</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">signed_mode</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4I0_7Index_T0_9endianess_11signed_modeEN3upd3keyE" title="upd::key::Signed_Mode"><span class="n"><span class="pre">Signed_Mode</span></span></a><a class="headerlink" href="#_CPPv4N3upd3key11signed_modeE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Equals the <code class="docutils literal notranslate"><span class="pre">Signed_Mode</span></code> template parameter. </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N3upd3key14payload_lengthE">
<span id="_CPPv3N3upd3key14payload_lengthE"></span><span id="_CPPv2N3upd3key14payload_lengthE"></span><span id="upd::key::payload_length__auto"></span><span class="target" id="structupd_1_1key_1ae88c0eb282581965040ce067c362c2c3"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="k"><span class="pre">constexpr</span></span><span class="w"> </span><span class="kt"><span class="pre">auto</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">payload_length</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">sizeof</span></span><span class="p"><span class="pre">(</span></span><a class="reference internal" href="#_CPPv4I0_7Index_T0_9endianess_11signed_modeEN3upd3keyE" title="upd::key::Index_T"><span class="n"><span class="pre">Index_T</span></span></a><span class="p"><span class="pre">)</span></span><span class="w"> </span><span class="o"><span class="pre">+</span></span><span class="w"> </span><span class="n"><span class="pre">detail</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">parameters_size</span></span><span class="p"><span class="pre">&lt;</span></span><span class="n"><span class="pre">R</span></span><span class="p"><span class="pre">(</span></span><span class="n"><span class="pre">Args</span></span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">&gt;</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">value</span></span><a class="headerlink" href="#_CPPv4N3upd3key14payload_lengthE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Equals the length in bytes of an action request produced by this key. </p>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="action">
<h3><code class="docutils literal notranslate"><span class="pre">action</span></code><a class="headerlink" href="#action" title="Permalink to this heading">¶</a></h3>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4N3upd6actionE">
<span id="_CPPv3N3upd6actionE"></span><span id="_CPPv2N3upd6actionE"></span><span id="upd::action"></span><span class="target" id="classupd_1_1action"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">action</span></span></span><span class="w"> </span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="k"><span class="pre">public</span></span><span class="w"> </span><span class="n"><span class="pre">upd</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">detail</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">immediate_process</span></span><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4N3upd6actionE" title="upd::action"><span class="n"><span class="pre">action</span></span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="p"><span class="pre">&gt;</span></span><a class="headerlink" href="#_CPPv4N3upd6actionE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Wrapper around a callback which serialize / unserialize parameters and return values. </p>
<p>Given a byte sequence generated by a  key instance, an  action instance (whose underlying callback has the same signature as the aforesaid  key instance) is able to unserialize the parameters from that byte sequence, invoke the underlying callback and serialize the return value as a byte sequence (which can later be unserialized by the same  key instance to obtain the return value). </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4I_9endianess_11signed_mode0EN3upd6action6actionERR1F11endianess_hI9EndianessE13signed_mode_hI11Signed_ModeE">
<span id="_CPPv3I_9endianess_11signed_mode0EN3upd6action6actionERR1F11endianess_hI9EndianessE13signed_mode_hI11Signed_ModeE"></span><span id="_CPPv2I_9endianess_11signed_mode0EN3upd6action6actionERR1F11endianess_hI9EndianessE13signed_mode_hI11Signed_ModeE"></span><span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="serialization.html#_CPPv4N3upd9endianessE" title="upd::endianess"><span class="n"><span class="pre">endianess</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Endianess</span></span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="serialization.html#_CPPv4N3upd11signed_modeE" title="upd::signed_mode"><span class="n"><span class="pre">signed_mode</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Signed_Mode</span></span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">typename</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">F</span></span></span><span class="p"><span class="pre">&gt;</span></span><br /><span class="target" id="classupd_1_1action_1ac4fffa5c1f11603a3a6f0450af645a89"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">explicit</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">action</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4I_9endianess_11signed_mode0EN3upd6action6actionERR1F11endianess_hI9EndianessE13signed_mode_hI11Signed_ModeE" title="upd::action::action::F"><span class="n"><span class="pre">F</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">ftor</span></span>, <a class="reference internal" href="serialization.html#_CPPv4I_9endianessEN3upd11endianess_hE" title="upd::endianess_h"><span class="n"><span class="pre">endianess_h</span></span></a><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4I_9endianess_11signed_mode0EN3upd6action6actionERR1F11endianess_hI9EndianessE13signed_mode_hI11Signed_ModeE" title="upd::action::action::Endianess"><span class="n"><span class="pre">Endianess</span></span></a><span class="p"><span class="pre">&gt;</span></span>, <a class="reference internal" href="serialization.html#_CPPv4I_11signed_modeEN3upd13signed_mode_hE" title="upd::signed_mode_h"><span class="n"><span class="pre">signed_mode_h</span></span></a><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4I_9endianess_11signed_mode0EN3upd6action6actionERR1F11endianess_hI9EndianessE13signed_mode_hI11Signed_ModeE" title="upd::action::action::Signed_Mode"><span class="n"><span class="pre">Signed_Mode</span></span></a><span class="p"><span class="pre">&gt;</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4I_9endianess_11signed_mode0EN3upd6action6actionERR1F11endianess_hI9EndianessE13signed_mode_hI11Signed_ModeE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Wrap a copy of a provided callback. </p>
<dl class="field-list simple">
<dt class="field-odd">Template Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>Endianess, Signed_Mode</strong> – Serialization parameters </p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ftor</strong> – Callback to be wrapped </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4I0EN3upd6action6actionERR1F">
<span id="_CPPv3I0EN3upd6action6actionERR1F"></span><span id="_CPPv2I0EN3upd6action6actionERR1F"></span><span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><span class="k"><span class="pre">typename</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">F</span></span></span><span class="p"><span class="pre">&gt;</span></span><br /><span class="target" id="classupd_1_1action_1a84ec84df9b0d3a6afded566c8697562c"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">explicit</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">action</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4I0EN3upd6action6actionERR1F" title="upd::action::action::F"><span class="n"><span class="pre">F</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">ftor</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4I0EN3upd6action6actionERR1F" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Wrap a copy of a provided callback. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ftor</strong> – Callback to be wrapped </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4I00ENK3upd6actionclEvRR3SrcRR4Dest">
<span id="_CPPv3I00ENK3upd6actionclERR3SrcRR4Dest"></span><span id="_CPPv2I00ENK3upd6actionclERR3SrcRR4Dest"></span><span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><span class="k"><span class="pre">typename</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Src</span></span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">typename</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Dest</span></span></span><span class="p"><span class="pre">&gt;</span></span><br /><span class="target" id="classupd_1_1action_1a26a82aa15b5860e06fa75931c3634145"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="k"><span class="pre">operator</span></span><span class="o"><span class="pre">()</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4I00ENK3upd6actionclEvRR3SrcRR4Dest" title="upd::action::operator()::Src"><span class="n"><span class="pre">Src</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">src</span></span>, <a class="reference internal" href="#_CPPv4I00ENK3upd6actionclEvRR3SrcRR4Dest" title="upd::action::operator()::Dest"><span class="n"><span class="pre">Dest</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">dest</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4I00ENK3upd6actionclEvRR3SrcRR4Dest" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Invoke the managed callback. </p>
<p>The parameters are unserialized from the input byte sequence from <code class="docutils literal notranslate"><span class="pre">src</span></code>. After the callback invocation, the result is serialized into <code class="docutils literal notranslate"><span class="pre">dest</span></code>.</p>
<p>The following member functions are also defined through CRTP. <div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">auto</span> <span class="n">operator</span><span class="p">()(</span><span class="n">Input</span> <span class="o">&amp;&amp;</span><span class="p">,</span> <span class="n">Output</span> <span class="o">&amp;&amp;</span><span class="p">);</span>
<span class="n">auto</span> <span class="n">operator</span><span class="p">()(</span><span class="n">Input</span> <span class="o">&amp;&amp;</span><span class="p">,</span> <span class="n">Output</span> <span class="o">&amp;&amp;</span><span class="p">)</span> <span class="n">const</span><span class="p">;</span>
</pre></div>
</div>
 All these functions work the same way as <code class="docutils literal notranslate"><span class="pre">operator()(Src</span> <span class="pre">&amp;&amp;,</span> <span class="pre">Dest</span> <span class="pre">&amp;&amp;)</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Template Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Input</strong> – An input functor type or an input iterator type </p></li>
<li><p><strong>Output</strong> – An output functor type or an output iterator type</p></li>
</ul>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>src</strong> – Input byte sequence as a callback </p></li>
<li><p><strong>dest</strong> – Output byte sequence as a callback </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4I0ENK3upd6actionclEvRR5Input">
<span id="_CPPv3I0ENK3upd6actionclERR5Input"></span><span id="_CPPv2I0ENK3upd6actionclERR5Input"></span><span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><span class="k"><span class="pre">typename</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Input</span></span></span><span class="p"><span class="pre">&gt;</span></span><br /><span class="target" id="classupd_1_1action_1a9332bd11bc4d2226aaa022b92bcff2a6"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="k"><span class="pre">operator</span></span><span class="o"><span class="pre">()</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4I0ENK3upd6actionclEvRR5Input" title="upd::action::operator()::Input"><span class="n"><span class="pre">Input</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">input</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4I0ENK3upd6actionclEvRR5Input" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Invoke the managed callback. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>input</strong> – Input byte sequence </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK3upd6action10input_sizeEv">
<span id="_CPPv3NK3upd6action10input_sizeEv"></span><span id="_CPPv2NK3upd6action10input_sizeEv"></span><span id="upd::action::input_sizeC"></span><span class="target" id="classupd_1_1action_1ad972333782ed80c53fed48c4edf111e6"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">input_size</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK3upd6action10input_sizeEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get the size in bytes of the payload needed to invoke the wrapped callback. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The size of the payload in bytes </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK3upd6action11output_sizeEv">
<span id="_CPPv3NK3upd6action11output_sizeEv"></span><span id="_CPPv2NK3upd6action11output_sizeEv"></span><span id="upd::action::output_sizeC"></span><span class="target" id="classupd_1_1action_1ae032c8770cac3badcf6fd1638c6f8e2f"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">output_size</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK3upd6action11output_sizeEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get the size in bytes of the payload representing the return value of the wrapped callback. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The size of the payload in bytes </p>
</dd>
</dl>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="no-storage-action">
<h3><code class="docutils literal notranslate"><span class="pre">no_storage_action</span></code><a class="headerlink" href="#no-storage-action" title="Permalink to this heading">¶</a></h3>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4N3upd17no_storage_actionE">
<span id="_CPPv3N3upd17no_storage_actionE"></span><span id="_CPPv2N3upd17no_storage_actionE"></span><span id="upd::no_storage_action"></span><span class="target" id="classupd_1_1no__storage__action"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">no_storage_action</span></span></span><span class="w"> </span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="k"><span class="pre">public</span></span><span class="w"> </span><span class="n"><span class="pre">upd</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">detail</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">immediate_process</span></span><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4N3upd17no_storage_actionE" title="upd::no_storage_action"><span class="n"><span class="pre">no_storage_action</span></span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="p"><span class="pre">&gt;</span></span><a class="headerlink" href="#_CPPv4N3upd17no_storage_actionE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Action which does not manage storage for its underlying callback. </p>
<p><a class="reference internal" href="#classupd_1_1no__storage__action"><span class="std std-ref">no_storage_action</span></a> instances must be given a free function or a callback with static storage duration, which makes them less permissive than  action instances. On the other hand, they do not rely on dynamic allocation, which can be useful for embedded software. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4I0_1F_9endianess_11signed_modeEN3upd17no_storage_action17no_storage_actionE11unevaluatedI1F4FtorE11endianess_hI9EndianessE13signed_mode_hI11Signed_ModeE">
<span id="_CPPv3I0_1F_9endianess_11signed_modeEN3upd17no_storage_action17no_storage_actionE11unevaluatedI1F4FtorE11endianess_hI9EndianessE13signed_mode_hI11Signed_ModeE"></span><span id="_CPPv2I0_1F_9endianess_11signed_modeEN3upd17no_storage_action17no_storage_actionE11unevaluatedI1F4FtorE11endianess_hI9EndianessE13signed_mode_hI11Signed_ModeE"></span><span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><span class="k"><span class="pre">typename</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">F</span></span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4I0_1F_9endianess_11signed_modeEN3upd17no_storage_action17no_storage_actionE11unevaluatedI1F4FtorE11endianess_hI9EndianessE13signed_mode_hI11Signed_ModeE" title="upd::no_storage_action::no_storage_action::F"><span class="n"><span class="pre">F</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Ftor</span></span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="serialization.html#_CPPv4N3upd9endianessE" title="upd::endianess"><span class="n"><span class="pre">endianess</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Endianess</span></span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="serialization.html#_CPPv4N3upd11signed_modeE" title="upd::signed_mode"><span class="n"><span class="pre">signed_mode</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Signed_Mode</span></span></span><span class="p"><span class="pre">&gt;</span></span><br /><span class="target" id="classupd_1_1no__storage__action_1a43f2afe2e54a996c9d074a5412fcfa76"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">explicit</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">no_storage_action</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="shared.html#_CPPv4I0_1TEN3upd11unevaluatedE" title="upd::unevaluated"><span class="n"><span class="pre">unevaluated</span></span></a><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4I0_1F_9endianess_11signed_modeEN3upd17no_storage_action17no_storage_actionE11unevaluatedI1F4FtorE11endianess_hI9EndianessE13signed_mode_hI11Signed_ModeE" title="upd::no_storage_action::no_storage_action::F"><span class="n"><span class="pre">F</span></span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4I0_1F_9endianess_11signed_modeEN3upd17no_storage_action17no_storage_actionE11unevaluatedI1F4FtorE11endianess_hI9EndianessE13signed_mode_hI11Signed_ModeE" title="upd::no_storage_action::no_storage_action::Ftor"><span class="n"><span class="pre">Ftor</span></span></a><span class="p"><span class="pre">&gt;</span></span>, <a class="reference internal" href="serialization.html#_CPPv4I_9endianessEN3upd11endianess_hE" title="upd::endianess_h"><span class="n"><span class="pre">endianess_h</span></span></a><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4I0_1F_9endianess_11signed_modeEN3upd17no_storage_action17no_storage_actionE11unevaluatedI1F4FtorE11endianess_hI9EndianessE13signed_mode_hI11Signed_ModeE" title="upd::no_storage_action::no_storage_action::Endianess"><span class="n"><span class="pre">Endianess</span></span></a><span class="p"><span class="pre">&gt;</span></span>, <a class="reference internal" href="serialization.html#_CPPv4I_11signed_modeEN3upd13signed_mode_hE" title="upd::signed_mode_h"><span class="n"><span class="pre">signed_mode_h</span></span></a><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4I0_1F_9endianess_11signed_modeEN3upd17no_storage_action17no_storage_actionE11unevaluatedI1F4FtorE11endianess_hI9EndianessE13signed_mode_hI11Signed_ModeE" title="upd::no_storage_action::no_storage_action::Signed_Mode"><span class="n"><span class="pre">Signed_Mode</span></span></a><span class="p"><span class="pre">&gt;</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4I0_1F_9endianess_11signed_modeEN3upd17no_storage_action17no_storage_actionE11unevaluatedI1F4FtorE11endianess_hI9EndianessE13signed_mode_hI11Signed_ModeE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Create an action holding the provided callback. </p>
<dl class="field-list simple">
<dt class="field-odd">Template Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Ftor</strong> – Free function or callback with static storage duration </p></li>
<li><p><strong>Endianess, Signed_Mode</strong> – Serialization parameters </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4I0_1FEN3upd17no_storage_action17no_storage_actionE11unevaluatedI1F4FtorE">
<span id="_CPPv3I0_1FEN3upd17no_storage_action17no_storage_actionE11unevaluatedI1F4FtorE"></span><span id="_CPPv2I0_1FEN3upd17no_storage_action17no_storage_actionE11unevaluatedI1F4FtorE"></span><span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><span class="k"><span class="pre">typename</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">F</span></span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4I0_1FEN3upd17no_storage_action17no_storage_actionE11unevaluatedI1F4FtorE" title="upd::no_storage_action::no_storage_action::F"><span class="n"><span class="pre">F</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Ftor</span></span></span><span class="p"><span class="pre">&gt;</span></span><br /><span class="target" id="classupd_1_1no__storage__action_1a9e182c6e27711cabde5109a5a2527640"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">explicit</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">no_storage_action</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="shared.html#_CPPv4I0_1TEN3upd11unevaluatedE" title="upd::unevaluated"><span class="n"><span class="pre">unevaluated</span></span></a><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4I0_1FEN3upd17no_storage_action17no_storage_actionE11unevaluatedI1F4FtorE" title="upd::no_storage_action::no_storage_action::F"><span class="n"><span class="pre">F</span></span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4I0_1FEN3upd17no_storage_action17no_storage_actionE11unevaluatedI1F4FtorE" title="upd::no_storage_action::no_storage_action::Ftor"><span class="n"><span class="pre">Ftor</span></span></a><span class="p"><span class="pre">&gt;</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4I0_1FEN3upd17no_storage_action17no_storage_actionE11unevaluatedI1F4FtorE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Create an action holding the provided callback. </p>
<dl class="field-list simple">
<dt class="field-odd">Template Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>Ftor</strong> – Free function or callback with static storage duration </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4I00ENK3upd17no_storage_actionclEvRR3SrcRR4Dest">
<span id="_CPPv3I00ENK3upd17no_storage_actionclERR3SrcRR4Dest"></span><span id="_CPPv2I00ENK3upd17no_storage_actionclERR3SrcRR4Dest"></span><span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><span class="k"><span class="pre">typename</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Src</span></span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">typename</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Dest</span></span></span><span class="p"><span class="pre">&gt;</span></span><br /><span class="target" id="classupd_1_1no__storage__action_1a79d2589147a421e7c56f7968721e55af"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="k"><span class="pre">operator</span></span><span class="o"><span class="pre">()</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4I00ENK3upd17no_storage_actionclEvRR3SrcRR4Dest" title="upd::no_storage_action::operator()::Src"><span class="n"><span class="pre">Src</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">src</span></span>, <a class="reference internal" href="#_CPPv4I00ENK3upd17no_storage_actionclEvRR3SrcRR4Dest" title="upd::no_storage_action::operator()::Dest"><span class="n"><span class="pre">Dest</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">dest</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4I00ENK3upd17no_storage_actionclEvRR3SrcRR4Dest" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Invoke the managed callback. </p>
<p>The parameters are unserialized from the input byte sequence from <code class="docutils literal notranslate"><span class="pre">src</span></code>. After the callback invocation, the result is serialized into <code class="docutils literal notranslate"><span class="pre">dest</span></code>.</p>
<p>The following member functions are also defined through CRTP. <div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">auto</span> <span class="n">operator</span><span class="p">()(</span><span class="n">Input</span> <span class="o">&amp;&amp;</span><span class="p">,</span> <span class="n">Output</span> <span class="o">&amp;&amp;</span><span class="p">);</span>
<span class="n">auto</span> <span class="n">operator</span><span class="p">()(</span><span class="n">Input</span> <span class="o">&amp;&amp;</span><span class="p">,</span> <span class="n">Output</span> <span class="o">&amp;&amp;</span><span class="p">)</span> <span class="n">const</span><span class="p">;</span>
</pre></div>
</div>
 All these functions work the same way as <code class="docutils literal notranslate"><span class="pre">operator()(Src</span> <span class="pre">&amp;&amp;,</span> <span class="pre">Dest</span> <span class="pre">&amp;&amp;)</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Template Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Input</strong> – An input functor type or an input iterator type </p></li>
<li><p><strong>Output</strong> – An output functor type or an output iterator type</p></li>
</ul>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>src</strong> – Input byte sequence as a callback </p></li>
<li><p><strong>dest</strong> – Output byte sequence as a callback </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK3upd17no_storage_action10input_sizeEv">
<span id="_CPPv3NK3upd17no_storage_action10input_sizeEv"></span><span id="_CPPv2NK3upd17no_storage_action10input_sizeEv"></span><span id="upd::no_storage_action::input_sizeC"></span><span class="target" id="classupd_1_1no__storage__action_1a74ac4efbe8e03bc6adfaf668f8614eca"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">input_size</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK3upd17no_storage_action10input_sizeEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get the size in bytes of the payload needed to invoke the wrapped callback. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The size of the payload in bytes </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK3upd17no_storage_action11output_sizeEv">
<span id="_CPPv3NK3upd17no_storage_action11output_sizeEv"></span><span id="_CPPv2NK3upd17no_storage_action11output_sizeEv"></span><span id="upd::no_storage_action::output_sizeC"></span><span class="target" id="classupd_1_1no__storage__action_1a85bc5c6b96f67cb3b394cecba670b9ce"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">output_size</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK3upd17no_storage_action11output_sizeEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get the size in bytes of the payload representing the return value of the wrapped callback. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The size of the payload in bytes </p>
</dd>
</dl>
</dd></dl>

</div>
</dd></dl>

</section>
</section>
</section>


	    </div>
            <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="callee.html" class="btn btn-neutral float-right" title="Implementing callee side">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="shared.html" class="btn btn-neutral" title="Sharing RPC convention"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright .
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/jucacrispim/sphinx_pdj_theme">theme</a> provided by <a href="http://poraodojuca.net">Porão do Juca</a>.

</footer>
	</div>
	</div>
	  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
    <script type="text/javascript" src="_static/documentation_options.js">

    </script>
    <script type="text/javascript" src="_static/jquery.js">

    </script>
    <script type="text/javascript" src="_static/underscore.js">

    </script>
    <script type="text/javascript" src="_static/_sphinx_javascript_frameworks_compat.js">

    </script>
    <script type="text/javascript" src="_static/doctools.js">

    </script>
    <script type="text/javascript" src="_static/sphinx_highlight.js">

    </script>

  

   <script type="text/javascript"
           src="_static/js/theme.js"></script>

   <script type="text/javascript"
           src="_static/js/pdj.js"></script>

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

  </body>
</html>